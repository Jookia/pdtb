#tcpobjs = packet.obj arp.obj eth.obj ip.obj tcp.obj tcpsockm.obj udp.obj utils.obj dns.obj timer.obj ipasm.obj
tcpobjs = packet.obj arp.obj eth.obj ip.obj tcp.obj utils.obj tcpsockm.obj timer.obj ipasm.obj
botobjs = bot.obj # hello.obj
testobjs = testio.obj

all : bot.com test.com

clean : .symbolic
  @del /q obj\tcplib
  @del /q obj\test
  @del /q obj\bot
  @del /q obj
  @del *.com
  @del *.exe
  @del *.sym
  @del *.map

.asm : tcplib;test;bot;

.cpp : tcplib;test;bot;

.obj : obj\tcplib;obj\test\;obj\bot;

.asm.obj : 
  wasm -0 -ms $[* -fo=obj\$[*.obj -fr=obj\$[&.err

.cpp.obj :
  wpp $[* -fc=ppargs -fo=obj\$[*.obj -fr=obj\$[&.err

hello.obj : bot\hello.asm
  nasm -f obj bot\hello.asm -o obj\bot\hello.obj

bot.com: $(tcpobjs) $(botobjs)
  wlink name $@ file obj\tcplib\*.obj,obj\bot\*.obj

test.com: $(tcpobjs) $(testobjs)
  wlink name $@ file obj\tcplib\*.obj,obj\test\*.obj
